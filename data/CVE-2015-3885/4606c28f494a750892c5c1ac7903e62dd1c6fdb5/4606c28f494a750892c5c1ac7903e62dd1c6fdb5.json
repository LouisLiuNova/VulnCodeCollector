{
    "owner": "LibRaw",
    "repo": "LibRaw",
    "commit_sha": "4606c28f494a750892c5c1ac7903e62dd1c6fdb5",
    "commit_massage": "0.16.1: fix for dcraw ljpeg_start() vulnerability",
    "raw_ref": "https://api.github.com/repos/LibRaw/LibRaw/commits/4606c28f494a750892c5c1ac7903e62dd1c6fdb5",
    "html_ref": "https://github.com/LibRaw/LibRaw/commit/4606c28f494a750892c5c1ac7903e62dd1c6fdb5",
    "author": "alextutubalin",
    "changes_stats": {
        "total": 40,
        "additions": 31,
        "deletions": 9
    },
    "files": [
        {
            "sha": "75be4962d27329bb2fad8dafab545d538f71bfed",
            "filename": "Changelog.rus",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/LibRaw/LibRaw/blob/4606c28f494a750892c5c1ac7903e62dd1c6fdb5/Changelog.rus",
            "raw_url": "https://github.com/LibRaw/LibRaw/raw/4606c28f494a750892c5c1ac7903e62dd1c6fdb5/Changelog.rus",
            "contents_url": "https://api.github.com/repos/LibRaw/LibRaw/contents/Changelog.rus?ref=4606c28f494a750892c5c1ac7903e62dd1c6fdb5",
            "patch": "@@ -1,4 +1,8 @@\n-\ufeff2014-01-17 Alex Tutubalin <lexa@lexa.ru>\n+\ufeff2015-05-11 Alex Tutubalin <lexa@lexa.ru>\n+  * \u0418\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430 \u0443\u044f\u0437\u0432\u0438\u043c\u043e\u0441\u0442\u044c \u0432 dcraw:ljpeg_start()\n+  * LibRaw 0.16.1\n+\n+2014-01-17 Alex Tutubalin <lexa@lexa.ru>\n   * \u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0430 \u043a\u0430\u043c\u0435\u0440\n     \u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u044b: Fujifilm X-E2,XQ1\n     \u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b \u0446\u0432\u0435\u0442\u043e\u0432\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435: Nikon D4, 1 AW1/J3; Fuji X-M2\n@@ -13,7 +17,7 @@\n   * \u0418\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u044b \u043e\u0448\u0438\u0431\u043a\u0438 \u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0446\u0438\u0438 \u043f\u0440\u0438 \u0441\u0431\u043e\u0440\u043a\u0435 VS2012 \u0441 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u043d\u044b\u043c\n     OpenMP\n   * \u0418\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430 \u043e\u043f\u0435\u0447\u0430\u0442\u043a\u0430, \u043d\u0435 \u0434\u0430\u0432\u0430\u0432\u0448\u0430\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c Demosaic Pack GPL2\n-  * LibRaw 0.16.0-Beta1\n+  * LibRaw 0.16.0\n \n 2013-11-12 Alex Tutubalin <lexa@lexa.ru>\n   * \u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0430 \u043d\u043e\u0432\u044b\u0445 \u043a\u0430\u043c\u0435\u0440"
        },
        {
            "sha": "546e532e054d2142e1c0b2946cc751db0d238a38",
            "filename": "Changelog.txt",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/LibRaw/LibRaw/blob/4606c28f494a750892c5c1ac7903e62dd1c6fdb5/Changelog.txt",
            "raw_url": "https://github.com/LibRaw/LibRaw/raw/4606c28f494a750892c5c1ac7903e62dd1c6fdb5/Changelog.txt",
            "contents_url": "https://api.github.com/repos/LibRaw/LibRaw/contents/Changelog.txt?ref=4606c28f494a750892c5c1ac7903e62dd1c6fdb5",
            "patch": "@@ -1,3 +1,7 @@\n+2015-05-11 Alex Tutubalin <lexa@lexa.ru>\n+  * Fix for dcraw ljpeg_start() vulnerability\n+  * LibRaw 0.16.1-Release\n+\n 2014-01-17 Alex Tutubalin <lexa@lexa.ru>\n   * Camera support:\n      Added: Fujifilm XE2, XQ1"
        },
        {
            "sha": "938cab6a9d32851de43c8aac28e81510e81bb367",
            "filename": "dcraw/dcraw.c",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/LibRaw/LibRaw/blob/4606c28f494a750892c5c1ac7903e62dd1c6fdb5/dcraw%2Fdcraw.c",
            "raw_url": "https://github.com/LibRaw/LibRaw/raw/4606c28f494a750892c5c1ac7903e62dd1c6fdb5/dcraw%2Fdcraw.c",
            "contents_url": "https://api.github.com/repos/LibRaw/LibRaw/contents/dcraw%2Fdcraw.c?ref=4606c28f494a750892c5c1ac7903e62dd1c6fdb5",
            "patch": "@@ -841,7 +841,8 @@ struct jhead {\n \n int CLASS ljpeg_start (struct jhead *jh, int info_only)\n {\n-  int c, tag, len;\n+  int c, tag;\n+  ushort len;\n   uchar data[0x10000];\n   const uchar *dp;\n "
        },
        {
            "sha": "3a3c6824377fde2caf29b510aefcb2a62967e04d",
            "filename": "internal/dcraw_common.cpp",
            "status": "modified",
            "additions": 14,
            "deletions": 1,
            "changes": 15,
            "blob_url": "https://github.com/LibRaw/LibRaw/blob/4606c28f494a750892c5c1ac7903e62dd1c6fdb5/internal%2Fdcraw_common.cpp",
            "raw_url": "https://github.com/LibRaw/LibRaw/raw/4606c28f494a750892c5c1ac7903e62dd1c6fdb5/internal%2Fdcraw_common.cpp",
            "contents_url": "https://api.github.com/repos/LibRaw/LibRaw/contents/internal%2Fdcraw_common.cpp?ref=4606c28f494a750892c5c1ac7903e62dd1c6fdb5",
            "patch": "@@ -21,6 +21,7 @@ it under the terms of the one of three licenses as you choose:\n    for more information\n */\n \n+#line 261 \"dcraw/dcraw.c\"\n #include <math.h>\n #define CLASS LibRaw::\n #include \"libraw/libraw_types.h\"\n@@ -29,6 +30,7 @@ it under the terms of the one of three licenses as you choose:\n #include \"libraw/libraw.h\"\n #include \"internal/defines.h\"\n #include \"internal/var_defines.h\"\n+#line 272 \"dcraw/dcraw.c\"\n int CLASS fcol (int row, int col)\n {\n   static const char filter[16][16] =\n@@ -75,6 +77,7 @@ char *my_strcasestr (char *haystack, const char *needle)\n }\n #define strcasestr my_strcasestr\n #endif\n+#line 340 \"dcraw/dcraw.c\"\n ushort CLASS sget2 (uchar *s)\n {\n   if (order == 0x4949)\t\t/* \"II\" means little-endian */\n@@ -564,10 +567,12 @@ void CLASS canon_load_raw()\n #endif\n   FORC(2) free (huff[c]);\n }\n+#line 841 \"dcraw/dcraw.c\"\n \n int CLASS ljpeg_start (struct jhead *jh, int info_only)\n {\n-  int c, tag, len;\n+  int c, tag;\n+  ushort len;\n   uchar data[0x10000];\n   const uchar *dp;\n \n@@ -1153,6 +1158,7 @@ int CLASS minolta_z2()\n     if (tail[i]) nz++;\n   return nz > 20;\n }\n+#line 1436 \"dcraw/dcraw.c\"\n void CLASS ppm_thumb()\n {\n   char *thumb;\n@@ -2976,6 +2982,7 @@ void CLASS redcine_load_raw()\n #endif\n #endif\n }\n+#line 3983 \"dcraw/dcraw.c\"\n void CLASS crop_masked_pixels()\n {\n   int row, col;\n@@ -3081,6 +3088,7 @@ void CLASS remove_zeroes()\n   RUN_CALLBACK(LIBRAW_PROGRESS_REMOVE_ZEROES,1,2);\n #endif\n }\n+#line 4254 \"dcraw/dcraw.c\"\n void CLASS gamma_curve (double pwr, double ts, int mode, int imax)\n {\n   int i;\n@@ -4790,6 +4798,7 @@ void CLASS parse_thumb_note (int base, unsigned toff, unsigned tlen)\n     fseek (ifp, save, SEEK_SET);\n   }\n }\n+#line 5968 \"dcraw/dcraw.c\"\n void CLASS parse_makernote (int base, int uptag)\n {\n   static const uchar xlat[2][256] = {\n@@ -5349,6 +5358,7 @@ void CLASS parse_kodak_ifd (int base)\n     fseek (ifp, save, SEEK_SET);\n   }\n }\n+#line 6533 \"dcraw/dcraw.c\"\n int CLASS parse_tiff_ifd (int base)\n {\n   unsigned entries, tag, type, len, plen=16, save;\n@@ -6648,6 +6658,7 @@ void CLASS parse_redcine()\n     data_offset = get4();\n   }\n }\n+#line 7936 \"dcraw/dcraw.c\"\n \n /*\n    All matrices are from Adobe DNG Converter unless otherwise noted.\n@@ -8923,6 +8934,7 @@ void CLASS identify()\n }\n \n \n+#line 10303 \"dcraw/dcraw.c\"\n void CLASS convert_to_rgb()\n {\n #ifndef LIBRAW_LIBRARY_BUILD\n@@ -9153,6 +9165,7 @@ int CLASS flip_index (int row, int col)\n   if (flip & 1) col = iwidth  - 1 - col;\n   return row * iwidth + col;\n }\n+#line 10559 \"dcraw/dcraw.c\"\n void CLASS tiff_set (ushort *ntag,\n \tushort tag, ushort type, int count, int val)\n {"
        },
        {
            "sha": "06933de40cdbd5319463c8d6c85a1f56fdaf73bb",
            "filename": "internal/dcraw_fileio.cpp",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/LibRaw/LibRaw/blob/4606c28f494a750892c5c1ac7903e62dd1c6fdb5/internal%2Fdcraw_fileio.cpp",
            "raw_url": "https://github.com/LibRaw/LibRaw/raw/4606c28f494a750892c5c1ac7903e62dd1c6fdb5/internal%2Fdcraw_fileio.cpp",
            "contents_url": "https://api.github.com/repos/LibRaw/LibRaw/contents/internal%2Fdcraw_fileio.cpp?ref=4606c28f494a750892c5c1ac7903e62dd1c6fdb5",
            "patch": "@@ -21,15 +21,15 @@ it under the terms of the one of three licenses as you choose:\n    for more information\n */\n \n-#line 4090 \"dcraw/dcraw.c\"\n+#line 4091 \"dcraw/dcraw.c\"\n #include <math.h>\n #define CLASS LibRaw::\n #include \"libraw/libraw_types.h\"\n #define LIBRAW_LIBRARY_BUILD\n #include \"libraw/libraw.h\"\n #include \"internal/defines.h\"\n #include \"internal/var_defines.h\"\n-#line 4101 \"dcraw/dcraw.c\"\n+#line 4102 \"dcraw/dcraw.c\"\n /*\n    Seach from the current directory up to the root looking for\n    a \".badpixels\" file, and fix those pixels now.\n@@ -54,7 +54,7 @@ void CLASS bad_pixels (const char *cfname)\n #endif\n   if (cfname)\n     fp = fopen (cfname, \"r\");\n-#line 4151 \"dcraw/dcraw.c\"\n+#line 4152 \"dcraw/dcraw.c\"\n   if (!fp)\n       {\n #ifdef LIBRAW_LIBRARY_BUILD\n@@ -154,7 +154,7 @@ void CLASS subtract (const char *fname)\n   RUN_CALLBACK(LIBRAW_PROGRESS_DARK_FRAME,1,2);\n #endif\n }\n-#line 10213 \"dcraw/dcraw.c\"\n+#line 10214 \"dcraw/dcraw.c\"\n #ifndef NO_LCMS\n void CLASS apply_profile (const char *input, const char *output)\n {"
        },
        {
            "sha": "030a477e6573203fbd34c255fef407f0ccc3408f",
            "filename": "libraw/libraw_version.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/LibRaw/LibRaw/blob/4606c28f494a750892c5c1ac7903e62dd1c6fdb5/libraw%2Flibraw_version.h",
            "raw_url": "https://github.com/LibRaw/LibRaw/raw/4606c28f494a750892c5c1ac7903e62dd1c6fdb5/libraw%2Flibraw_version.h",
            "contents_url": "https://api.github.com/repos/LibRaw/LibRaw/contents/libraw%2Flibraw_version.h?ref=4606c28f494a750892c5c1ac7903e62dd1c6fdb5",
            "patch": "@@ -25,7 +25,7 @@ it under the terms of the one of three licenses as you choose:\n \n #define LIBRAW_MAJOR_VERSION  0\n #define LIBRAW_MINOR_VERSION  16\n-#define LIBRAW_PATCH_VERSION  0\n+#define LIBRAW_PATCH_VERSION  1\n #define LIBRAW_VERSION_TAIL   Release\n \n #define LIBRAW_SHLIB_CURRENT  \t10"
        }
    ],
    "parent_commit_sha": "0217a0d03cb0ebef1aa3c8e91fdffbf6e93268f8"
}