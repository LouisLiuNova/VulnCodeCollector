{
    "owner": "qemu",
    "repo": "qemu",
    "commit_sha": "d9a3b33d2c9f996537b7f1d0246dee2d0120cefb",
    "commit_massage": "acpi: fix buffer overrun on migration\n\nich calls acpi_gpe_init with length ICH9_PMIO_GPE0_LEN so\nICH9_PMIO_GPE0_LEN/2 bytes are allocated, but then the full\nICH9_PMIO_GPE0_LEN bytes are migrated.\n\nAs a quick work-around, allocate twice the memory.\nWe'll probably want to tweak code to avoid\nmigrating the extra ICH9_PMIO_GPE0_LEN/2 bytes,\nbut that is a bit trickier to do without breaking\nmigration compatibility.\n\nTested-by: \"Dr. David Alan Gilbert\" <dgilbert@redhat.com>\nReported-by: \"Dr. David Alan Gilbert\" <dgilbert@redhat.com>\nCc: qemu-stable@nongnu.org\nSigned-off-by: Michael S. Tsirkin <mst@redhat.com>",
    "raw_ref": "https://api.github.com/repos/qemu/qemu/commits/d9a3b33d2c9f996537b7f1d0246dee2d0120cefb",
    "html_ref": "https://github.com/qemu/qemu/commit/d9a3b33d2c9f996537b7f1d0246dee2d0120cefb",
    "author": "mstsirkin",
    "changes_stats": {
        "total": 8,
        "additions": 6,
        "deletions": 2
    },
    "files": [
        {
            "sha": "21e113d713daa6c8422e7a2e3bd7a5a06988bdd7",
            "filename": "hw/acpi/core.c",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/qemu/qemu/blob/d9a3b33d2c9f996537b7f1d0246dee2d0120cefb/hw%2Facpi%2Fcore.c",
            "raw_url": "https://github.com/qemu/qemu/raw/d9a3b33d2c9f996537b7f1d0246dee2d0120cefb/hw%2Facpi%2Fcore.c",
            "contents_url": "https://api.github.com/repos/qemu/qemu/contents/hw%2Facpi%2Fcore.c?ref=d9a3b33d2c9f996537b7f1d0246dee2d0120cefb",
            "patch": "@@ -625,8 +625,12 @@ void acpi_pm1_cnt_reset(ACPIREGS *ar)\n void acpi_gpe_init(ACPIREGS *ar, uint8_t len)\n {\n     ar->gpe.len = len;\n-    ar->gpe.sts = g_malloc0(len / 2);\n-    ar->gpe.en = g_malloc0(len / 2);\n+    /* Only first len / 2 bytes are ever used,\n+     * but the caller in ich9.c migrates full len bytes.\n+     * TODO: fix ich9.c and drop the extra allocation.\n+     */\n+    ar->gpe.sts = g_malloc0(len);\n+    ar->gpe.en = g_malloc0(len);\n }\n \n void acpi_gpe_reset(ACPIREGS *ar)"
        }
    ],
    "parent_commit_sha": "48854f57ce3e6aa4bd13368559e5c292e1c44e49"
}