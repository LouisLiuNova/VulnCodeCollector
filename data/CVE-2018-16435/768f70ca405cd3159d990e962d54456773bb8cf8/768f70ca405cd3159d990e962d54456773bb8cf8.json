{
    "owner": "mm2",
    "repo": "Little-CMS",
    "commit_sha": "768f70ca405cd3159d990e962d54456773bb8cf8",
    "commit_massage": "Upgrade Visual studio 2017 15.8\n\n- Upgrade to 15.8\n- Add check on CGATS memory allocation (thanks to Quang Nguyen for\npointing out this)",
    "raw_ref": "https://api.github.com/repos/mm2/Little-CMS/commits/768f70ca405cd3159d990e962d54456773bb8cf8",
    "html_ref": "https://github.com/mm2/Little-CMS/commit/768f70ca405cd3159d990e962d54456773bb8cf8",
    "author": "mm2",
    "changes_stats": {
        "total": 30,
        "additions": 19,
        "deletions": 11
    },
    "files": [
        {
            "sha": "39cfd00ca761a44fa0ac13267f57cc115c695ce8",
            "filename": "Projects/VC2017/jpegicc/jpegicc.vcxproj",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/mm2/Little-CMS/blob/768f70ca405cd3159d990e962d54456773bb8cf8/Projects%2FVC2017%2Fjpegicc%2Fjpegicc.vcxproj",
            "raw_url": "https://github.com/mm2/Little-CMS/raw/768f70ca405cd3159d990e962d54456773bb8cf8/Projects%2FVC2017%2Fjpegicc%2Fjpegicc.vcxproj",
            "contents_url": "https://api.github.com/repos/mm2/Little-CMS/contents/Projects%2FVC2017%2Fjpegicc%2Fjpegicc.vcxproj?ref=768f70ca405cd3159d990e962d54456773bb8cf8",
            "patch": "@@ -22,6 +22,7 @@\n     <ProjectGuid>{62812507-F926-4968-96A9-17678460AD90}</ProjectGuid>\n     <RootNamespace>jpegicc</RootNamespace>\n     <Keyword>Win32Proj</Keyword>\n+    <WindowsTargetPlatformVersion>10.0.17134.0</WindowsTargetPlatformVersion>\n   </PropertyGroup>\n   <Import Project=\"$(VCTargetsPath)\\Microsoft.Cpp.Default.props\" />\n   <PropertyGroup Condition=\"'$(Configuration)|$(Platform)'=='Release|Win32'\" Label=\"Configuration\">"
        },
        {
            "sha": "d1bf3eb61600ba48fdcc3ed6623c8e8d226bc55c",
            "filename": "Projects/VC2017/lcms2_DLL/lcms2_DLL.vcxproj",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/mm2/Little-CMS/blob/768f70ca405cd3159d990e962d54456773bb8cf8/Projects%2FVC2017%2Flcms2_DLL%2Flcms2_DLL.vcxproj",
            "raw_url": "https://github.com/mm2/Little-CMS/raw/768f70ca405cd3159d990e962d54456773bb8cf8/Projects%2FVC2017%2Flcms2_DLL%2Flcms2_DLL.vcxproj",
            "contents_url": "https://api.github.com/repos/mm2/Little-CMS/contents/Projects%2FVC2017%2Flcms2_DLL%2Flcms2_DLL.vcxproj?ref=768f70ca405cd3159d990e962d54456773bb8cf8",
            "patch": "@@ -22,7 +22,7 @@\n     <ProjectGuid>{8C51BE48-ADB8-4089-A9EC-F6BF993A0548}</ProjectGuid>\n     <RootNamespace>lcms2_DLL</RootNamespace>\n     <Keyword>Win32Proj</Keyword>\n-    <WindowsTargetPlatformVersion>8.1</WindowsTargetPlatformVersion>\n+    <WindowsTargetPlatformVersion>10.0.17134.0</WindowsTargetPlatformVersion>\n   </PropertyGroup>\n   <Import Project=\"$(VCTargetsPath)\\Microsoft.Cpp.Default.props\" />\n   <PropertyGroup Condition=\"'$(Configuration)|$(Platform)'=='Release|Win32'\" Label=\"Configuration\">"
        },
        {
            "sha": "9fc05ce35d8eb2cf60fdc33e38dcf01301bd1e18",
            "filename": "Projects/VC2017/lcms2_static/lcms2_static.vcxproj",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/mm2/Little-CMS/blob/768f70ca405cd3159d990e962d54456773bb8cf8/Projects%2FVC2017%2Flcms2_static%2Flcms2_static.vcxproj",
            "raw_url": "https://github.com/mm2/Little-CMS/raw/768f70ca405cd3159d990e962d54456773bb8cf8/Projects%2FVC2017%2Flcms2_static%2Flcms2_static.vcxproj",
            "contents_url": "https://api.github.com/repos/mm2/Little-CMS/contents/Projects%2FVC2017%2Flcms2_static%2Flcms2_static.vcxproj?ref=768f70ca405cd3159d990e962d54456773bb8cf8",
            "patch": "@@ -22,7 +22,7 @@\n     <ProjectGuid>{71DEDE59-3F1E-486B-A899-4283000F76B5}</ProjectGuid>\n     <RootNamespace>lcms2_static</RootNamespace>\n     <Keyword>Win32Proj</Keyword>\n-    <WindowsTargetPlatformVersion>8.1</WindowsTargetPlatformVersion>\n+    <WindowsTargetPlatformVersion>10.0.17134.0</WindowsTargetPlatformVersion>\n   </PropertyGroup>\n   <Import Project=\"$(VCTargetsPath)\\Microsoft.Cpp.Default.props\" />\n   <PropertyGroup Condition=\"'$(Configuration)|$(Platform)'=='Release|Win32'\" Label=\"Configuration\">"
        },
        {
            "sha": "51586ddb61215fd7cc0f4959955620336d2cc730",
            "filename": "Projects/VC2017/linkicc/linkicc.vcxproj",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/mm2/Little-CMS/blob/768f70ca405cd3159d990e962d54456773bb8cf8/Projects%2FVC2017%2Flinkicc%2Flinkicc.vcxproj",
            "raw_url": "https://github.com/mm2/Little-CMS/raw/768f70ca405cd3159d990e962d54456773bb8cf8/Projects%2FVC2017%2Flinkicc%2Flinkicc.vcxproj",
            "contents_url": "https://api.github.com/repos/mm2/Little-CMS/contents/Projects%2FVC2017%2Flinkicc%2Flinkicc.vcxproj?ref=768f70ca405cd3159d990e962d54456773bb8cf8",
            "patch": "@@ -22,7 +22,7 @@\n     <ProjectGuid>{FBFBE1DC-DB84-4BA1-9552-B4780F457849}</ProjectGuid>\n     <RootNamespace>linkicc</RootNamespace>\n     <Keyword>Win32Proj</Keyword>\n-    <WindowsTargetPlatformVersion>8.1</WindowsTargetPlatformVersion>\n+    <WindowsTargetPlatformVersion>10.0.17134.0</WindowsTargetPlatformVersion>\n   </PropertyGroup>\n   <Import Project=\"$(VCTargetsPath)\\Microsoft.Cpp.Default.props\" />\n   <PropertyGroup Condition=\"'$(Configuration)|$(Platform)'=='Release|Win32'\" Label=\"Configuration\">"
        },
        {
            "sha": "8f26e12874338a353234a3b88a29d2df30479d29",
            "filename": "Projects/VC2017/psicc/psicc.vcxproj",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/mm2/Little-CMS/blob/768f70ca405cd3159d990e962d54456773bb8cf8/Projects%2FVC2017%2Fpsicc%2Fpsicc.vcxproj",
            "raw_url": "https://github.com/mm2/Little-CMS/raw/768f70ca405cd3159d990e962d54456773bb8cf8/Projects%2FVC2017%2Fpsicc%2Fpsicc.vcxproj",
            "contents_url": "https://api.github.com/repos/mm2/Little-CMS/contents/Projects%2FVC2017%2Fpsicc%2Fpsicc.vcxproj?ref=768f70ca405cd3159d990e962d54456773bb8cf8",
            "patch": "@@ -22,7 +22,7 @@\n     <ProjectGuid>{EF6A8851-65FE-46F5-B9EF-14F0B671F693}</ProjectGuid>\n     <RootNamespace>psicc</RootNamespace>\n     <Keyword>Win32Proj</Keyword>\n-    <WindowsTargetPlatformVersion>8.1</WindowsTargetPlatformVersion>\n+    <WindowsTargetPlatformVersion>10.0.17134.0</WindowsTargetPlatformVersion>\n   </PropertyGroup>\n   <Import Project=\"$(VCTargetsPath)\\Microsoft.Cpp.Default.props\" />\n   <PropertyGroup Condition=\"'$(Configuration)|$(Platform)'=='Release|Win32'\" Label=\"Configuration\">"
        },
        {
            "sha": "3f6aea3f6c193f3a2567421f001d035607a64411",
            "filename": "Projects/VC2017/testbed/testbed.vcxproj",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/mm2/Little-CMS/blob/768f70ca405cd3159d990e962d54456773bb8cf8/Projects%2FVC2017%2Ftestbed%2Ftestbed.vcxproj",
            "raw_url": "https://github.com/mm2/Little-CMS/raw/768f70ca405cd3159d990e962d54456773bb8cf8/Projects%2FVC2017%2Ftestbed%2Ftestbed.vcxproj",
            "contents_url": "https://api.github.com/repos/mm2/Little-CMS/contents/Projects%2FVC2017%2Ftestbed%2Ftestbed.vcxproj?ref=768f70ca405cd3159d990e962d54456773bb8cf8",
            "patch": "@@ -22,7 +22,7 @@\n     <ProjectGuid>{928A3A2B-46EF-4279-959C-513B3652FF0E}</ProjectGuid>\n     <RootNamespace>testbed</RootNamespace>\n     <Keyword>Win32Proj</Keyword>\n-    <WindowsTargetPlatformVersion>8.1</WindowsTargetPlatformVersion>\n+    <WindowsTargetPlatformVersion>10.0.17134.0</WindowsTargetPlatformVersion>\n   </PropertyGroup>\n   <Import Project=\"$(VCTargetsPath)\\Microsoft.Cpp.Default.props\" />\n   <PropertyGroup Condition=\"'$(Configuration)|$(Platform)'=='Release|Win32'\" Label=\"Configuration\">"
        },
        {
            "sha": "3a6d837eb962ed1d7623c53208b89a1ec010329c",
            "filename": "Projects/VC2017/tiffdiff/tiffdiff.vcxproj",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/mm2/Little-CMS/blob/768f70ca405cd3159d990e962d54456773bb8cf8/Projects%2FVC2017%2Ftiffdiff%2Ftiffdiff.vcxproj",
            "raw_url": "https://github.com/mm2/Little-CMS/raw/768f70ca405cd3159d990e962d54456773bb8cf8/Projects%2FVC2017%2Ftiffdiff%2Ftiffdiff.vcxproj",
            "contents_url": "https://api.github.com/repos/mm2/Little-CMS/contents/Projects%2FVC2017%2Ftiffdiff%2Ftiffdiff.vcxproj?ref=768f70ca405cd3159d990e962d54456773bb8cf8",
            "patch": "@@ -22,7 +22,7 @@\n     <ProjectGuid>{75B91835-CCD7-48BE-A606-A9C997D5DBEE}</ProjectGuid>\n     <RootNamespace>tiffdiff</RootNamespace>\n     <Keyword>Win32Proj</Keyword>\n-    <WindowsTargetPlatformVersion>8.1</WindowsTargetPlatformVersion>\n+    <WindowsTargetPlatformVersion>10.0.17134.0</WindowsTargetPlatformVersion>\n   </PropertyGroup>\n   <Import Project=\"$(VCTargetsPath)\\Microsoft.Cpp.Default.props\" />\n   <PropertyGroup Condition=\"'$(Configuration)|$(Platform)'=='Release|Win32'\" Label=\"Configuration\">"
        },
        {
            "sha": "5ef954fde97a74d8a75988bcfbe06f21f5722487",
            "filename": "Projects/VC2017/tifficc/tifficc.vcxproj",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/mm2/Little-CMS/blob/768f70ca405cd3159d990e962d54456773bb8cf8/Projects%2FVC2017%2Ftifficc%2Ftifficc.vcxproj",
            "raw_url": "https://github.com/mm2/Little-CMS/raw/768f70ca405cd3159d990e962d54456773bb8cf8/Projects%2FVC2017%2Ftifficc%2Ftifficc.vcxproj",
            "contents_url": "https://api.github.com/repos/mm2/Little-CMS/contents/Projects%2FVC2017%2Ftifficc%2Ftifficc.vcxproj?ref=768f70ca405cd3159d990e962d54456773bb8cf8",
            "patch": "@@ -22,7 +22,7 @@\n     <ProjectGuid>{2256DE16-ED92-4A6F-9C54-F65BB61E64A2}</ProjectGuid>\n     <RootNamespace>tifficc</RootNamespace>\n     <Keyword>Win32Proj</Keyword>\n-    <WindowsTargetPlatformVersion>8.1</WindowsTargetPlatformVersion>\n+    <WindowsTargetPlatformVersion>10.0.17134.0</WindowsTargetPlatformVersion>\n   </PropertyGroup>\n   <Import Project=\"$(VCTargetsPath)\\Microsoft.Cpp.Default.props\" />\n   <PropertyGroup Condition=\"'$(Configuration)|$(Platform)'=='Release|Win32'\" Label=\"Configuration\">"
        },
        {
            "sha": "b3173d8602e4b8e3cb3120d32029ca109bd0e40f",
            "filename": "Projects/VC2017/transicc/transicc.vcxproj",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/mm2/Little-CMS/blob/768f70ca405cd3159d990e962d54456773bb8cf8/Projects%2FVC2017%2Ftransicc%2Ftransicc.vcxproj",
            "raw_url": "https://github.com/mm2/Little-CMS/raw/768f70ca405cd3159d990e962d54456773bb8cf8/Projects%2FVC2017%2Ftransicc%2Ftransicc.vcxproj",
            "contents_url": "https://api.github.com/repos/mm2/Little-CMS/contents/Projects%2FVC2017%2Ftransicc%2Ftransicc.vcxproj?ref=768f70ca405cd3159d990e962d54456773bb8cf8",
            "patch": "@@ -22,6 +22,7 @@\n     <ProjectGuid>{9EE22D66-C849-474C-9ED5-C3E141DAB160}</ProjectGuid>\n     <RootNamespace>transicc</RootNamespace>\n     <Keyword>Win32Proj</Keyword>\n+    <WindowsTargetPlatformVersion>10.0.17134.0</WindowsTargetPlatformVersion>\n   </PropertyGroup>\n   <Import Project=\"$(VCTargetsPath)\\Microsoft.Cpp.Default.props\" />\n   <PropertyGroup Condition=\"'$(Configuration)|$(Platform)'=='Release|Win32'\" Label=\"Configuration\">"
        },
        {
            "sha": "8c3e96d1f4adcd64082ba09f918d45c3dec31672",
            "filename": "src/cmscgats.c",
            "status": "modified",
            "additions": 10,
            "deletions": 4,
            "changes": 14,
            "blob_url": "https://github.com/mm2/Little-CMS/blob/768f70ca405cd3159d990e962d54456773bb8cf8/src%2Fcmscgats.c",
            "raw_url": "https://github.com/mm2/Little-CMS/raw/768f70ca405cd3159d990e962d54456773bb8cf8/src%2Fcmscgats.c",
            "contents_url": "https://api.github.com/repos/mm2/Little-CMS/contents/src%2Fcmscgats.c?ref=768f70ca405cd3159d990e962d54456773bb8cf8",
            "patch": "@@ -1,7 +1,7 @@\n //---------------------------------------------------------------------------------\n //\n //  Little Color Management System\n-//  Copyright (c) 1998-2017 Marti Maria Saguer\n+//  Copyright (c) 1998-2018 Marti Maria Saguer\n //\n // Permission is hereby granted, free of charge, to any person obtaining\n // a copy of this software and associated documentation files (the \"Software\"),\n@@ -1506,10 +1506,16 @@ void AllocateDataSet(cmsIT8* it8)\n     t-> nSamples   = atoi(cmsIT8GetProperty(it8, \"NUMBER_OF_FIELDS\"));\n     t-> nPatches   = atoi(cmsIT8GetProperty(it8, \"NUMBER_OF_SETS\"));\n \n-    t-> Data = (char**)AllocChunk (it8, ((cmsUInt32Number) t->nSamples + 1) * ((cmsUInt32Number) t->nPatches + 1) *sizeof (char*));\n-    if (t->Data == NULL) {\n+    if (t -> nSamples < 0 || t->nSamples > 0x7ffe || t->nPatches < 0 || t->nPatches > 0x7ffe)\n+    {\n+        SynError(it8, \"AllocateDataSet: too much data\");\n+    }\n+    else {\n+        t->Data = (char**)AllocChunk(it8, ((cmsUInt32Number)t->nSamples + 1) * ((cmsUInt32Number)t->nPatches + 1) * sizeof(char*));\n+        if (t->Data == NULL) {\n \n-        SynError(it8, \"AllocateDataSet: Unable to allocate data array\");\n+            SynError(it8, \"AllocateDataSet: Unable to allocate data array\");\n+        }\n     }\n \n }"
        }
    ],
    "parent_commit_sha": "c2a1cd9c929952c5aeca8fee91649a83e8fc8021"
}