{
    "owner": "ImageMagick",
    "repo": "ImageMagick6",
    "commit_sha": "450949ed017f009b399c937cf362f0058eacc5fa",
    "commit_massage": "Pull request: https://github.com/ImageMagick/ImageMagick/pull/4963",
    "raw_ref": "https://api.github.com/repos/ImageMagick/ImageMagick6/commits/450949ed017f009b399c937cf362f0058eacc5fa",
    "html_ref": "https://github.com/ImageMagick/ImageMagick6/commit/450949ed017f009b399c937cf362f0058eacc5fa",
    "author": "Cristy",
    "changes_stats": {
        "total": 24,
        "additions": 19,
        "deletions": 5
    },
    "files": [
        {
            "sha": "efc92c303f93edf05d51ee84230f269526f3889b",
            "filename": "coders/emf.c",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/ImageMagick/ImageMagick6/blob/450949ed017f009b399c937cf362f0058eacc5fa/coders%2Femf.c",
            "raw_url": "https://github.com/ImageMagick/ImageMagick6/raw/450949ed017f009b399c937cf362f0058eacc5fa/coders%2Femf.c",
            "contents_url": "https://api.github.com/repos/ImageMagick/ImageMagick6/contents/coders%2Femf.c?ref=450949ed017f009b399c937cf362f0058eacc5fa",
            "patch": "@@ -411,7 +411,8 @@ static HENHMETAFILE ReadEnhMetaFile(const char *path,ssize_t *width,\n     }\n   ReadFile(hFile,pBits,dwSize,&dwSize,NULL);\n   CloseHandle(hFile);\n-  if (((PAPMHEADER) pBits)->dwKey != 0x9ac6cdd7l)\n+  if (((PAPMHEADER) pBits)->dwKey != 0x9ac6cdd7l ||\n+      (((PAPMHEADER) pBits)->wInch == 0))\n     {\n       pBits=(BYTE *) DestroyString((char *) pBits);\n       return((HENHMETAFILE) NULL);"
        },
        {
            "sha": "eedcf3782d8968d23d8595c4e06421f8431de59f",
            "filename": "coders/psd.c",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/ImageMagick/ImageMagick6/blob/450949ed017f009b399c937cf362f0058eacc5fa/coders%2Fpsd.c",
            "raw_url": "https://github.com/ImageMagick/ImageMagick6/raw/450949ed017f009b399c937cf362f0058eacc5fa/coders%2Fpsd.c",
            "contents_url": "https://api.github.com/repos/ImageMagick/ImageMagick6/contents/coders%2Fpsd.c?ref=450949ed017f009b399c937cf362f0058eacc5fa",
            "patch": "@@ -1048,8 +1048,9 @@ static MagickBooleanType ReadPSDChannelPixels(Image *image,\n           number_bits=8;\n         for (bit=0; bit < number_bits; bit++)\n         {\n-          SetPSDPixel(image,channels,type,packet_size,(((unsigned char) pixel)\n-            & (0x01 << (7-bit))) != 0 ? 0 : QuantumRange,q++,indexes,x++);\n+          SetPSDPixel(image,channels,type,packet_size,\n+            (((unsigned char) ((ssize_t) pixel)) & (0x01 << (7-bit))) != 0 ? 0 :\n+            QuantumRange,q++,indexes,x++);\n         }\n         if (x != (ssize_t) image->columns)\n           x--;"
        },
        {
            "sha": "dea54667d55b5a5d0b758499f01619688ff9e2c8",
            "filename": "magick/widget.c",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/ImageMagick/ImageMagick6/blob/450949ed017f009b399c937cf362f0058eacc5fa/magick%2Fwidget.c",
            "raw_url": "https://github.com/ImageMagick/ImageMagick6/raw/450949ed017f009b399c937cf362f0058eacc5fa/magick%2Fwidget.c",
            "contents_url": "https://api.github.com/repos/ImageMagick/ImageMagick6/contents/magick%2Fwidget.c?ref=450949ed017f009b399c937cf362f0058eacc5fa",
            "patch": "@@ -7861,6 +7861,8 @@ MagickExport int XMenuWidget(Display *display,XWindows *windows,\n             break;\n           }\n         state&=(~InactiveWidgetState);\n+        if (selection_info.height == 0)\n+          break;\n         id=(event.xbutton.y-top_offset)/(int) selection_info.height;\n         selection_info.id=id;\n         if ((id < 0) || (id >= (int) number_selections))\n@@ -7914,6 +7916,8 @@ MagickExport int XMenuWidget(Display *display,XWindows *windows,\n         if (event.xcrossing.state == 0)\n           break;\n         state&=(~InactiveWidgetState);\n+        if (selection_info.height == 0)\n+          break;\n         id=((event.xcrossing.y-top_offset)/(int) selection_info.height);\n         if ((selection_info.id >= 0) &&\n             (selection_info.id < (int) number_selections))\n@@ -8000,6 +8004,8 @@ MagickExport int XMenuWidget(Display *display,XWindows *windows,\n           break;\n         if (state & InactiveWidgetState)\n           break;\n+        if (selection_info.height == 0)\n+          break;\n         id=(event.xmotion.y-top_offset)/(int) selection_info.height;\n         if ((selection_info.id >= 0) &&\n             (selection_info.id < (int) number_selections))"
        },
        {
            "sha": "adc84d867900781c9a2ffa34b2029a2ed9ebfe50",
            "filename": "wand/animate.c",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/ImageMagick/ImageMagick6/blob/450949ed017f009b399c937cf362f0058eacc5fa/wand%2Fanimate.c",
            "raw_url": "https://github.com/ImageMagick/ImageMagick6/raw/450949ed017f009b399c937cf362f0058eacc5fa/wand%2Fanimate.c",
            "contents_url": "https://api.github.com/repos/ImageMagick/ImageMagick6/contents/wand%2Fanimate.c?ref=450949ed017f009b399c937cf362f0058eacc5fa",
            "patch": "@@ -1143,7 +1143,10 @@ WandExport MagickBooleanType AnimateImageCommand(ImageInfo *image_info,\n             if (i == (ssize_t) argc)\n               ThrowAnimateException(OptionError,\"MissingArgument\",option);\n             if (XRemoteCommand(display,resource_info.window_id,argv[i]) != 0)\n-              return(MagickFalse);\n+              {\n+                DestroyAnimate();\n+                return(MagickFalse);\n+              }\n             i--;\n             break;\n           }"
        },
        {
            "sha": "27abafa1b5cfa8afc0298d3b2de085aab01569d6",
            "filename": "wand/display.c",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/ImageMagick/ImageMagick6/blob/450949ed017f009b399c937cf362f0058eacc5fa/wand%2Fdisplay.c",
            "raw_url": "https://github.com/ImageMagick/ImageMagick6/raw/450949ed017f009b399c937cf362f0058eacc5fa/wand%2Fdisplay.c",
            "contents_url": "https://api.github.com/repos/ImageMagick/ImageMagick6/contents/wand%2Fdisplay.c?ref=450949ed017f009b399c937cf362f0058eacc5fa",
            "patch": "@@ -1491,7 +1491,10 @@ WandExport MagickBooleanType DisplayImageCommand(ImageInfo *image_info,\n             if (i == (ssize_t) argc)\n               ThrowDisplayException(OptionError,\"MissingArgument\",option);\n             if (XRemoteCommand(display,resource_info.window_id,argv[i]) != 0)\n-              return(MagickFalse);\n+              {\n+                DestroyDisplay();\n+                return(MagickFalse);\n+              }\n             i--;\n             break;\n           }"
        }
    ],
    "parent_commit_sha": "ee332c511445a1fb2934f40246c3c958aefd73e9"
}