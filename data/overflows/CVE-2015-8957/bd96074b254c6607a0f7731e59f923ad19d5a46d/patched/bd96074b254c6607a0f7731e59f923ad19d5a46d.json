{
    "owner": "ImageMagick",
    "repo": "ImageMagick",
    "commit_sha": "bd96074b254c6607a0f7731e59f923ad19d5a46d",
    "commit_massage": "http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=26848",
    "raw_ref": "https://api.github.com/repos/ImageMagick/ImageMagick/commits/bd96074b254c6607a0f7731e59f923ad19d5a46d",
    "html_ref": "https://github.com/ImageMagick/ImageMagick/commit/bd96074b254c6607a0f7731e59f923ad19d5a46d",
    "author": "cristy",
    "changes_stats": {
        "total": 17,
        "additions": 2,
        "deletions": 15
    },
    "files": [
        {
            "sha": "8f92fc37139b389650e0bef9fe181f2ab74b5d31",
            "filename": "coders/sun.c",
            "status": "modified",
            "additions": 2,
            "deletions": 15,
            "changes": 17,
            "blob_url": "https://github.com/ImageMagick/ImageMagick/blob/bd96074b254c6607a0f7731e59f923ad19d5a46d/coders%2Fsun.c",
            "raw_url": "https://github.com/ImageMagick/ImageMagick/raw/bd96074b254c6607a0f7731e59f923ad19d5a46d/coders%2Fsun.c",
            "contents_url": "https://api.github.com/repos/ImageMagick/ImageMagick/contents/coders%2Fsun.c?ref=bd96074b254c6607a0f7731e59f923ad19d5a46d",
            "patch": "@@ -326,28 +326,17 @@ static Image *ReadSUNImage(const ImageInfo *image_info,ExceptionInfo *exception)\n         size_t\n           one;\n \n-        image->storage_class=PseudoClass;\n         image->colors=sun_info.maplength;\n         one=1;\n         if (sun_info.maptype == RMT_NONE)\n           image->colors=one << sun_info.depth;\n         if (sun_info.maptype == RMT_EQUAL_RGB)\n           image->colors=sun_info.maplength/3;\n+        if (AcquireImageColormap(image,image->colors,exception) == MagickFalse)\n+          ThrowReaderException(ResourceLimitError,\"MemoryAllocationFailed\");\n       }\n     switch (sun_info.maptype)\n     {\n-      case RMT_NONE:\n-      {\n-        if (sun_info.depth < 24)\n-          {\n-            /*\n-              Create linear color ramp.\n-            */\n-            if (AcquireImageColormap(image,image->colors,exception) == MagickFalse)\n-              ThrowReaderException(ResourceLimitError,\"MemoryAllocationFailed\");\n-          }\n-        break;\n-      }\n       case RMT_EQUAL_RGB:\n       {\n         unsigned char\n@@ -356,8 +345,6 @@ static Image *ReadSUNImage(const ImageInfo *image_info,ExceptionInfo *exception)\n         /*\n           Read SUN raster colormap.\n         */\n-        if (AcquireImageColormap(image,image->colors,exception) == MagickFalse)\n-          ThrowReaderException(ResourceLimitError,\"MemoryAllocationFailed\");\n         sun_colormap=(unsigned char *) AcquireQuantumMemory(image->colors,\n           sizeof(*sun_colormap));\n         if (sun_colormap == (unsigned char *) NULL)"
        }
    ],
    "parent_commit_sha": "076d0c9a787cf3054f29089d5bced8b08b606b94"
}