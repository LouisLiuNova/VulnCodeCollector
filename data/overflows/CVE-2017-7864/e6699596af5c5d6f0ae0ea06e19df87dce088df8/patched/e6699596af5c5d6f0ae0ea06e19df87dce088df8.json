{
    "owner": "freetype",
    "repo": "freetype",
    "commit_sha": "e6699596af5c5d6f0ae0ea06e19df87dce088df8",
    "commit_massage": "[truetype] Fix MVAR post-action handling.\n\nReported as\n\n  https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=509\n\n* src/truetype/ttobjs.c (tt_size_reset): Do nothing for CFF2.  This\nis important to make `tt_size_reset_iterator' (called in\n`tt_apply_mvar') always work.",
    "raw_ref": "https://api.github.com/repos/freetype/freetype/commits/e6699596af5c5d6f0ae0ea06e19df87dce088df8",
    "html_ref": "https://github.com/freetype/freetype/commit/e6699596af5c5d6f0ae0ea06e19df87dce088df8",
    "author": "lemzwerg",
    "changes_stats": {
        "total": 20,
        "additions": 18,
        "deletions": 2
    },
    "files": [
        {
            "sha": "bec432e5f8a7099b8af4b6eece155bfa80d32db2",
            "filename": "ChangeLog",
            "status": "modified",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/freetype/freetype/blob/e6699596af5c5d6f0ae0ea06e19df87dce088df8/ChangeLog",
            "raw_url": "https://github.com/freetype/freetype/raw/e6699596af5c5d6f0ae0ea06e19df87dce088df8/ChangeLog",
            "contents_url": "https://api.github.com/repos/freetype/freetype/contents/ChangeLog?ref=e6699596af5c5d6f0ae0ea06e19df87dce088df8",
            "patch": "@@ -1,3 +1,15 @@\n+2017-02-02  Werner Lemberg  <wl@gnu.org>\n+\n+\t[truetype] Fix MVAR post-action handling.\n+\n+\tReported as\n+\n+\t  https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=509\n+\n+\t* src/truetype/ttobjs.c (tt_size_reset): Do nothing for CFF2.  This\n+\tis important to make `tt_size_reset_iterator' (called in\n+\t`tt_apply_mvar') always work.\n+\n 2017-02-02  Werner Lemberg  <wl@gnu.org>\n \n \tMake compilation with FT_CONFIG_OPTION_PIC work again."
        },
        {
            "sha": "00207bb46ae82d088b7d09ccdb5d70721605f9eb",
            "filename": "src/truetype/ttobjs.c",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/freetype/freetype/blob/e6699596af5c5d6f0ae0ea06e19df87dce088df8/src%2Ftruetype%2Fttobjs.c",
            "raw_url": "https://github.com/freetype/freetype/raw/e6699596af5c5d6f0ae0ea06e19df87dce088df8/src%2Ftruetype%2Fttobjs.c",
            "contents_url": "https://api.github.com/repos/freetype/freetype/contents/src%2Ftruetype%2Fttobjs.c?ref=e6699596af5c5d6f0ae0ea06e19df87dce088df8",
            "patch": "@@ -1212,10 +1212,14 @@\n     FT_Size_Metrics*  metrics;\n \n \n-    size->ttmetrics.valid = FALSE;\n-\n     face = (TT_Face)size->root.face;\n \n+    /* nothing to do for CFF2 */\n+    if ( face->isCFF2 )\n+      return FT_Err_Ok;\n+\n+    size->ttmetrics.valid = FALSE;\n+\n     metrics = &size->metrics;\n \n     /* copy the result from base layer */"
        }
    ],
    "parent_commit_sha": "dadc50a4679c74ead5a283dd48a4164bc4a27cdd"
}