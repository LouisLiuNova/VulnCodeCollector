{
    "owner": "LibreOffice",
    "repo": "core",
    "commit_sha": "62a97e6a561ce65e88d4c537a1b82c336f012722",
    "commit_massage": "ofz#372 check if ImplSplit succeeded\n\nChange-Id: I1e34295fe3ee5f77e787f583616d52fa92a0eca4",
    "raw_ref": "https://api.github.com/repos/LibreOffice/core/commits/62a97e6a561ce65e88d4c537a1b82c336f012722",
    "html_ref": "https://github.com/LibreOffice/core/commit/62a97e6a561ce65e88d4c537a1b82c336f012722",
    "author": "Caol\u00e1n McNamara",
    "changes_stats": {
        "total": 15,
        "additions": 10,
        "deletions": 5
    },
    "files": [
        {
            "sha": "835beb8bcffec157b6b55a6c0358b6ea2921ff06",
            "filename": "tools/inc/poly.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/LibreOffice/core/blob/62a97e6a561ce65e88d4c537a1b82c336f012722/tools%2Finc%2Fpoly.h",
            "raw_url": "https://github.com/LibreOffice/core/raw/62a97e6a561ce65e88d4c537a1b82c336f012722/tools%2Finc%2Fpoly.h",
            "contents_url": "https://api.github.com/repos/LibreOffice/core/contents/tools%2Finc%2Fpoly.h?ref=62a97e6a561ce65e88d4c537a1b82c336f012722",
            "patch": "@@ -43,7 +43,7 @@ class SAL_WARN_UNUSED ImplPolygon  : public ImplPolygonData\n \n     void            ImplSetSize( sal_uInt16 nSize, bool bResize = true );\n     void            ImplCreateFlagArray();\n-    void            ImplSplit( sal_uInt16 nPos, sal_uInt16 nSpace, ImplPolygon const * pInitPoly = nullptr );\n+    bool            ImplSplit( sal_uInt16 nPos, sal_uInt16 nSpace, ImplPolygon const * pInitPoly = nullptr );\n };\n \n #define MAX_POLYGONS        ((sal_uInt16)0x3FF0)"
        },
        {
            "sha": "945c0306e73bedd156e325800333c41ffcb11fd0",
            "filename": "tools/source/generic/poly.cxx",
            "status": "modified",
            "additions": 9,
            "deletions": 4,
            "changes": 13,
            "blob_url": "https://github.com/LibreOffice/core/blob/62a97e6a561ce65e88d4c537a1b82c336f012722/tools%2Fsource%2Fgeneric%2Fpoly.cxx",
            "raw_url": "https://github.com/LibreOffice/core/raw/62a97e6a561ce65e88d4c537a1b82c336f012722/tools%2Fsource%2Fgeneric%2Fpoly.cxx",
            "contents_url": "https://api.github.com/repos/LibreOffice/core/contents/tools%2Fsource%2Fgeneric%2Fpoly.cxx?ref=62a97e6a561ce65e88d4c537a1b82c336f012722",
            "patch": "@@ -212,11 +212,14 @@ void ImplPolygon::ImplSetSize( sal_uInt16 nNewSize, bool bResize )\n     mnPoints   = nNewSize;\n }\n \n-void ImplPolygon::ImplSplit( sal_uInt16 nPos, sal_uInt16 nSpace, ImplPolygon const * pInitPoly )\n+bool ImplPolygon::ImplSplit( sal_uInt16 nPos, sal_uInt16 nSpace, ImplPolygon const * pInitPoly )\n {\n     //Can't fit this in :-(, throw ?\n     if (mnPoints + nSpace > USHRT_MAX)\n-        return;\n+    {\n+        SAL_WARN(\"tools\", \"Polygon needs \" << mnPoints + nSpace << \" points, but only \" << USHRT_MAX << \" possible\");\n+        return false;\n+    }\n \n     const sal_uInt16    nNewSize = mnPoints + nSpace;\n     const std::size_t   nSpaceSize = static_cast<std::size_t>(nSpace) * sizeof(Point);\n@@ -272,6 +275,8 @@ void ImplPolygon::ImplSplit( sal_uInt16 nPos, sal_uInt16 nSpace, ImplPolygon con\n         mpPointAry = pNewAry;\n         mnPoints   = nNewSize;\n     }\n+\n+    return true;\n }\n \n void ImplPolygon::ImplCreateFlagArray()\n@@ -1472,8 +1477,8 @@ void Polygon::Insert( sal_uInt16 nPos, const Point& rPt )\n     if( nPos >= mpImplPolygon->mnPoints )\n         nPos = mpImplPolygon->mnPoints;\n \n-    mpImplPolygon->ImplSplit( nPos, 1 );\n-    mpImplPolygon->mpPointAry[ nPos ] = rPt;\n+    if (mpImplPolygon->ImplSplit(nPos, 1))\n+        mpImplPolygon->mpPointAry[ nPos ] = rPt;\n }\n \n void Polygon::Insert( sal_uInt16 nPos, const tools::Polygon& rPoly )"
        }
    ],
    "parent_commit_sha": "2cdaab42b9597c5d049dea81300c8b653dab046c"
}